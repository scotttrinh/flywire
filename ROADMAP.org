* flywire roadmap

This roadmap tracks the implementation against the Agent Interaction Architecture ([[file:devlogs/20251124130000-Plan_Agent_Interaction_Architecture.org][Plan_Agent_Interaction_Architecture.org]]) and the follow-on devlogs.

** Completed (Nov 2025)
- Session/env core: `flywire-session` + `flywire-session-env` with sync/async execution, structured results, cancellation handles, and event handlers.
- Snapshot layer: profile-aware `flywire-snapshot-get-snapshot`, extension hook, collectors for window ids, messages, visible content, and processes.
- Action registry: registry-backed tools (`type_text`, `press_key`, `run_command`, `goto_location`, `cancel`) with buffer/window context support.
- Safety: `flywire-policy` module with customizable allow predicate, respected per session and in async flows.
- Events: default environment wiring for minibuffer-open/idle snapshots; `flywire-async-mode` forwards session events for legacy users.
- Tests: unit, async, and e2e coverage for sessions, snapshots, actions, policy, and async handles (`nix run .#test` green).

** Gaps to close for agentic use
- Environment examples: only the default current-frame env ships today. A dedicated-frame env (keeps agent work off the user’s frame) and a headless test/CI env need documented or packaged examples.
- Event guidance per env: the default env wires minibuffer/idle events; guidance for alternate envs (e.g., selective frame/window filtering) is still to be written.
- Policy presets: only a customizable predicate exists. Prebuilt presets (strict/read-only) and path-aware policies would make production agent setups safer.
- Snapshot/docs polish: richer docs/examples for snapshot profiles and step/result shapes will help external agents consume the data without spelunking tests.

** Near-term priorities
1. Publish dedicated-frame and headless env helpers (with docs and tests) to validate the session/env abstraction for real agent loops.
2. Add doc/examples for wiring events inside custom envs, including teardown expectations.
3. Ship policy presets or examples (e.g., “navigation-only” for CI, “no file writes outside project”) and surface denial reasons in step results/events.
